{% extends "layout.html"  %}
{% block content %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css"/>
    <style>
        .center {
            text-align: center;
        }

        .book-list {
            width: 500px;
            margin: 20px auto 0 auto;
        }

        .book-name {
            display: inline-block;
        }
        
        .card {
            margin-bottom: 15px;
        }
    </style>
    <script>
        $(document).ready(function () {
            showBook();
        });

        function showBook() {
            $.ajax({
                type: 'GET',
                url: '/api/list?sample_give=샘플데이터',
                data: {},
                success: function (response) {
                    let mybooks = response['books_bestsellers']
                    for (let i = 0; i < mybooks.length; i++) {
                        let title = mybooks[i]['title']
                        let image = mybooks[i]['image']
                        let author = mybooks[i]['author']
                        let url = mybooks[i]['url']

                        let temp_html = `<div class="card">
                <div class="card-content">
                    <div class="media">
                        <div class="media-left">
                            <figure class="image is-48x48">
                                <img
                                        src="${image}"
                                        alt="Placeholder image"
                                />
                            </figure>
                        </div>
                        <div class="media-content">
                            <a href="${url}" target="_blank" class="book-name title is-4">${title} </a>
                            <p class="subtitle is-6">${author}</p>
                        </div>
                    </div>
                </div>

            </div>`
                        $('#book-box').append(temp_html)
                    }
                }
            });
        }


    </script>
</head>
<body>
<section class="hero is-warning">
    <div class="hero-body">
        <div class="container center">
            <h1 class="title">
                awesomebooks
            </h1>
            <h2 class="subtitle">
                비전공자 베스트셀러
            </h2>
        </div>
    </div>
</section>
<div class="book-list" id="book-box">

</div>
</body>
</html>
{% endblock %}
